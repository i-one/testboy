var testboy=testboy||{};(function(b){var a="",e=" ",c=":",f,i=window.document,d=Object.prototype.hasOwnProperty,g=["0","0","00"],h=function(m,l){var j=String(m),k=l-j.length;if(k>0){return g[k]+j}return m};b.globalize=function(j,k){if(window.execScript){window.execScript("var "+j+";")}window[j]=k};b.extend=function(l,j){var k=function(){};k.prototype=j.prototype;l.prototype=new k();l._super=j.prototype;j.prototype.constructor=j};b.OutputTarget=function(j){this._src=j};b.OutputTarget.prototype={_createDom:function(){this._src=i.createElement("pre");if(i.body){i.body.appendChild(this._src)}},_writeln:function(l,j){var k=i.createElement("span");k.innerHTML=l+"\n";if(j){k.style.color=j}this._src.appendChild(k)},writeln:function(k,j){if(!this._src){this._createDom()}this._writeln(k,j);this.writeln=this._writeln},clear:function(){var j=this._src;if(j){j.innerHTML=a}}};b.out=new b.OutputTarget();b.logger={_post:function(l,j,m){var k=new Date();msg=[h(k.getHours(),2),c,h(k.getMinutes(),2),c,h(k.getSeconds(),2),c,h(k.getMilliseconds(),3),e,l,e,m].join(a);b.out.writeln(msg,j)},log:function(j){b.out.writeln(j,"black")},info:function(j){this._post("[info]","gray",j)},fine:function(j){this._post("[fine]","green",j)},warning:function(j){this._post("[warning]","orange",j)},error:function(j){this._post("[error]","red",j)}};b.TestCase=function(j){this.name=j};b.TestCase.prototype={setUp:function(){},tearDown:function(){}};b.TestSuite=function(j){this.name=j;this.items=[]};b.TestSuite.prototype={add:function(k){var j=this.items;j[j.length]=k},setUp:function(){},tearDown:function(){}};b.TestResult=function(){this.testCount=0;this.errorCount=0;this.errors=[]};b.TestResult.prototype={reset:function(){this.errorCount=0;this.testCount=0;this.errors.length=0},addError:function(j){this.errors[this.errors.length]=j;this.errorCount++},incrementTestCount:function(){this.testCount++},isFailed:function(){return !!this.errorCount},isSuccessful:function(){return !!!this.errorCount}};b.runner={_tcCounter:0,_result:new b.TestResult(),_masterSuite:new b.TestSuite(),_runTestCase:function(k){var m=k.setUp,l=k.tearDown,j;b.logger.info('Running test case "'+k.name+'"');if(m){m()}for(j in k){if(d.call(k,j)&&j.indexOf("test")==0){try{k[j]();b.logger.fine('Test "'+j+'" passed.')}catch(n){this._result.addError(n);b.logger.error('Test "'+j+'" failed.\n'+n)}this._result.incrementTestCount()}}if(l){l()}},_run:function(m){var k=m.items,j=k.length,n;for(var l=0;l<j;l++){n=k[l];if(n instanceof b.TestSuite){this._run(n)}else{this._runTestCase(n)}}},add:function(j){this._masterSuite.add(j)},run:function(){var j=this._result;this._result.reset();this._run(this._masterSuite);b.logger.info(["Test finished with ",j.errorCount," error(s), ",j.testCount-j.errorCount,"/",j.testCount," tests are passed."].join(a));if(j.isSuccessful()){b.logger.info("TEST SUCCESSFUL")}else{b.logger.info("TEST FAILED")}}};b.ref={getSignature:function(l,k){var n=[l,"("],m=0,j=k.length-1;for(;m<j;m++){n[n.length]=typeof k[m];n[n.length]=", "}n[n.length]=typeof k[j];n[n.length]=")";return n.join(a)},valueToString:function(j){return[typeof j,"&lt;",j,"&gt;"].join(a)}};b.AssertionError=function(l,j,k){this.src=l;this.message=j;this.cause=k};b.AssertionError.prototype.name="testboy.AssertionError";b.AssertionError.prototype.toString=function(){return[this.name,c,e,this.message,"\n&nbsp;&nbsp;&nbsp;&nbsp;at ",this.src,": ",this.cause].join(a)};b.asserts={assertTrue:function(l,j){var k=b.ref.getSignature("assertTrue",arguments);if(l!==true){throw new b.AssertionError(k,j,"Argument is other than boolean&lt;true&gt;.")}},assertFalse:function(l,j){var k=b.ref.getSignature("assertFalse",arguments);if(l!==false){throw new b.AssertionError(k,j,"Argument is other than"+b.ref.valueToString(false)+".")}},assertEquals:function(k,m,j){var l=b.ref.getSignature("assertEquals",arguments);if(m!==k){throw new b.AssertionError(l,j,["Expected ",b.ref.valueToString(k)," instead of ",b.ref.valueToString(m),"."].join(a))}},assertNotUndefined:function(l,j){var k=b.ref.getSignature("assertNotUndefined",arguments);if(l===f){throw new b.AssertionError(k,j,"Argument is undefined.")}},assertUndefined:function(l,j){var k=b.ref.getSignature("assertUndefined",arguments);if(l!==f){throw new b.AssertionError(k,j,"Argument is other than undefined.")}},assertNull:function(l,j){var k=b.ref.getSignature("assertNull",arguments);if(l!==null){throw new b.AssertionError(k,j,"Argument is not null.")}},assertNotNull:function(l,j){var k=b.ref.getSignature("assertNotNull",arguments);if(l===null){throw new b.AssertionError(k,j,"Argument is null.")}},assertError:function(k,l,j,o){var p=b.ref.getSignature("assertError",arguments),m=false;try{k.apply(scope,l)}catch(n){m=true}if(m){throw new b.AssertionError(p,o,"Error was thrown when it was not expected.")}},assertNoError:function(k,l,j,o){var p=b.ref.getSignature("assertNoError",arguments),m=false;try{k.apply(scope,l)}catch(n){m=true}if(!m){throw new b.AssertionError(p,o,"Error wasn't thrown when it was expected.")}}};b.globalize("assertTrue",b.asserts.assertTrue);b.globalize("assertFalse",b.asserts.assertFalse);b.globalize("assertEquals",b.asserts.assertEquals);b.globalize("assertNotUndefined",b.asserts.assertNotUndefined);b.globalize("assertUndefined",b.asserts.assertUndefined);b.globalize("assertNull",b.asserts.assertNull);b.globalize("assertNotNull",b.asserts.assertNotNull);b.globalize("assertError",b.asserts.assertError);b.globalize("assertNoError",b.asserts.assertNoError)}(testboy));